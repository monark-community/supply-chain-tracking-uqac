{
  "_format": "hh3-sol-build-info-1",
  "id": "solc-0_8_28-d75c0f65a8a77dfbe22beb9bc5a5fb298547fae1",
  "solcVersion": "0.8.28",
  "solcLongVersion": "0.8.28+commit.7893614a",
  "userSourceNameMap": {
    "contracts/SupplyChain.sol": "project/contracts/SupplyChain.sol"
  },
  "input": {
    "language": "Solidity",
    "settings": {
      "evmVersion": "cancun",
      "optimizer": {
        "enabled": true,
        "runs": 200
      },
      "outputSelection": {
        "*": {
          "": [
            "ast"
          ],
          "*": [
            "abi",
            "evm.bytecode",
            "evm.deployedBytecode",
            "evm.methodIdentifiers",
            "metadata"
          ]
        }
      },
      "remappings": []
    },
    "sources": {
      "project/contracts/SupplyChain.sol": {
        "content": "// SPDX-License-Identifier: MIT\r\npragma solidity ^0.8.24;\r\n\r\ncontract SupplyChain {\r\n\r\n    // Define a struct to encapsulate all transaction details\r\n    struct TransactionInput {\r\n        string uid;\r\n        string productUid;\r\n        string country;\r\n        string province;\r\n        string actorName;\r\n        uint256 timestamp;\r\n        uint256 quantity;\r\n        string unit;\r\n        string eventType;\r\n        string actor;\r\n        uint8 humidity;\r\n        int8 temperature;\r\n        bool criticalEvent;\r\n        string transportDocRef;\r\n    }\r\n\r\n    // Define a nested struct for environmental data\r\n    struct Environment {\r\n        uint8 humidity;\r\n        int8 temperature;\r\n        bool criticalEvent;\r\n    }\r\n\r\n    // Define the main Transaction struct\r\n    struct Transaction {\r\n        string uid;\r\n        string productUid;\r\n        string country;\r\n        string province;\r\n        string actorName;\r\n        uint256 timestamp;\r\n        uint256 quantity;\r\n        string unit;\r\n        string eventType;\r\n        string actor;\r\n        Environment env;\r\n        string transportDocRef;\r\n    }\r\n\r\n    // Array to store all transactions\r\n    Transaction[] public transactions;\r\n\r\n    // Event to log new transactions\r\n    event TransactionAdded(string uid, string productUid, uint256 timestamp);\r\n\r\n    // Function to add a new transaction\r\n    function addTransaction(TransactionInput memory input) public {\r\n        // Create an Environment struct from the input\r\n        Environment memory env = Environment({\r\n            humidity: input.humidity,\r\n            temperature: input.temperature,\r\n            criticalEvent: input.criticalEvent\r\n        });\r\n\r\n        // Create a Transaction struct from the input and the Environment struct\r\n        Transaction memory newTx = Transaction({\r\n            uid: input.uid,\r\n            productUid: input.productUid,\r\n            country: input.country,\r\n            province: input.province,\r\n            actorName: input.actorName,\r\n            timestamp: input.timestamp,\r\n            quantity: input.quantity,\r\n            unit: input.unit,\r\n            eventType: input.eventType,\r\n            actor: input.actor,\r\n            env: env,\r\n            transportDocRef: input.transportDocRef\r\n        });\r\n\r\n        // Add the new transaction to the transactions array\r\n        transactions.push(newTx);\r\n\r\n        // Emit the TransactionAdded event\r\n        emit TransactionAdded(input.uid, input.productUid, input.timestamp);\r\n    }\r\n\r\n    // Function to get the total number of transactions\r\n    function getTransactionCount() public view returns (uint256) {\r\n        return transactions.length;\r\n    }\r\n\r\n    // Function to get a specific transaction by index\r\n    function getTransaction(uint256 index) public view returns (Transaction memory) {\r\n        require(index < transactions.length, \"Index out of bounds\");\r\n        return transactions[index];\r\n    }\r\n}\r\n"
      }
    }
  }
}